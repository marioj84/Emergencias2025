<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Quiz - Mejorado</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#061422;
    --card:#092433;
    --card-2:#0c3040;
    --muted:#a9c0d6;
    --accent1:#4db6ac; /* verde-azulado */
    --accent2:#4a90e2; /* azul */
    --danger:#ff6b6b;
    --success:#2ecc71;
    --option-bg: rgba(255,255,255,0.02);
    --option-border: rgba(255,255,255,0.04);
    --glass: rgba(255,255,255,0.03);
    --radius:12px;
  }
  *{box-sizing:border-box}
  body {
    margin:0;
    min-height:100vh;
    background: linear-gradient(180deg,#04101a 0%, #061422 60%);
    color:#d6e9f6;
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    padding:30px;
    display:flex;
    justify-content:center;
  }

  .wrap {
    width:100%;
    max-width:980px;
  }

  /* Header pequeño */
  header#quiz-header {
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    margin-bottom:18px;
  }
  header h1 {
    font-size:16px;
    margin:0;
    font-weight:600;
    color:#eaf6ff;
    letter-spacing:0.2px;
  }
  header p { margin:0; color:var(--muted); font-size:13px; }

  /* Card pregunta */
  .question {
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));
    border-radius: var(--radius);
    padding:14px;
    margin-bottom:14px;
    border: 1px solid var(--glass);
    box-shadow: 0 6px 18px rgba(2,8,12,0.45);
  }
  .q-head {
    display:flex;
    gap:12px;
    align-items:flex-start;
    margin-bottom:12px;
  }
  .q-num {
    background: linear-gradient(90deg,var(--accent1),var(--accent2));
    color:#022428;
    font-weight:700;
    padding:6px 10px;
    border-radius:9px;
    font-size:13px;
    min-width:44px;
    text-align:center;
    box-shadow: 0 6px 20px rgba(10,25,30,0.45);
  }
  .q-text { font-size:14px; line-height:1.35; color:#e9f5ff; font-weight:600; }

  /* Opciones como cajas grandes */
  .options { display:flex; flex-direction:column; gap:10px; margin-top:6px; }
  .option-label {
    display:flex;
    align-items:center;
    gap:14px;
    padding:14px 16px;
    border-radius:10px;
    background:var(--option-bg);
    border: 1px solid var(--option-border);
    cursor:pointer;
    transition: transform .08s ease, box-shadow .14s ease, background .14s ease, border-color .14s ease;
    user-select:none;
  }
  .option-label:hover { transform:translateY(-3px); box-shadow: 0 10px 28px rgba(2,8,12,0.45); }

  /* Radio personalizado */
  .radio {
    width:18px;
    height:18px;
    border-radius:50%;
    border: 2px solid rgba(255,255,255,0.16);
    display:flex;
    align-items:center;
    justify-content:center;
    flex:0 0 18px;
    background:transparent;
  }
  .radio::after {
    content:"";
    width:10px;
    height:10px;
    border-radius:50%;
    background:transparent;
    transition: background .12s ease, transform .12s ease;
    transform:scale(0.8);
  }
  .option-label input[type="radio"]{ display:none; }

  /* Checked state - shown on label */
  .option-label.selected { border-color: rgba(255,255,255,0.16); box-shadow: 0 6px 30px rgba(2,8,12,0.55); }
  .option-label.selected .radio{ border-color: rgba(255,255,255,0.9); }
  .option-label.selected .radio::after{ background:rgba(255,255,255,0.92); transform:scale(1); }

  /* Correct / Incorrect */
  .option-label.correct {
    background: linear-gradient(90deg, rgba(46,204,113,0.08), rgba(52,152,219,0.03));
    border-color: rgba(46,204,113,0.8);
    box-shadow: 0 10px 30px rgba(46,204,113,0.06);
  }
  .option-label.correct .radio{ border-color: rgba(46,204,113,0.95); }
  .option-label.correct .radio::after{ background: rgba(46,204,113,0.95); }

  .option-label.incorrect {
    background: linear-gradient(90deg, rgba(255,107,107,0.08), rgba(255,107,107,0.03));
    border-color: rgba(255,107,107,0.9);
    box-shadow: 0 10px 30px rgba(255,107,107,0.06);
  }
  .option-label.incorrect .radio{ border-color: rgba(255,107,107,0.95); }
  .option-label.incorrect .radio::after{ background: rgba(255,107,107,0.95); }

  /* Texto de opción */
  .option-text { font-size:15px; color:#dff2ff; line-height:1.25; }

  /* Progreso */
  .progress-wrap {
    margin-top:18px;
    background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.02));
    padding:12px;
    border-radius:10px;
    border:1px solid var(--glass);
    display:flex;
    gap:12px;
    align-items:center;
    justify-content:space-between;
  }
  .progress-left { display:flex; flex-direction:column; gap:6px; }
  .progress-stats { font-size:13px; color:var(--muted); }
  .bar {
    width:420px;
    max-width:62%;
    height:12px;
    background: rgba(255,255,255,0.04);
    border-radius:10px;
    overflow:hidden;
    position:relative;
    border:1px solid rgba(255,255,255,0.02);
  }
  .bar-fill {
    height:100%;
    width:0%;
    transition: width 420ms cubic-bezier(.2,.9,.2,1);
    background: linear-gradient(90deg, var(--accent1), var(--accent2));
    box-shadow: 0 6px 18px rgba(74,144,226,0.12) inset;
  }
  .progress-percent {
    font-weight:700;
    color:#eaffff;
    font-size:13px;
    min-width:60px;
    text-align:right;
  }

  /* Responsive */
  @media (max-width:720px){
    .bar{ max-width:50%; width:50%;}
    .wrap{ padding:0 12px; }
    .q-text{ font-size:13px; }
  }
</style>
</head>
<body>
  <div class="wrap">

    <header id="quiz-header">
      <div>
        <h1>Quiz TAC - Práctica</h1>
        <p>Progreso visual, respuestas con marcación inmediata.</p>
      </div>
      <div style="text-align:right">
        <p style="margin:0;color:var(--muted);font-size:13px">Preguntas: <span id="total-qs">0</span></p>
      </div>
    </header>

    <!-- EJEMPLO: Reemplaza cada .question con tu pregunta real y ajusta data-correct="A" -->
    <div class="question" data-qid="11" data-correct="A">
      <div class="q-head">
        <div class="q-num">11</div>
        <div class="q-text">CUANDO A UN TRIPULANTE LE CORRESPONDE UN DESCANSO MÍNIMO (10 HORAS), SE DEBERÁ CONSIDERAR UN TIEMPO ADICIONAL DE 45 MINUTOS PARA EFECTOS DE TRASLADO...</div>
      </div>
      <div class="options">
        <label class="option-label"><div class="radio"></div><input type="radio" name="q11" value="A"><div class="option-text">VERDADERO</div></label>
        <label class="option-label"><div class="radio"></div><input type="radio" name="q11" value="B"><div class="option-text">FALSO</div></label>
      </div>
    </div>

    <div class="question" data-qid="12" data-correct="B">
      <div class="q-head">
        <div class="q-num">12</div>
        <div class="q-text">Otra pregunta de ejemplo</div>
      </div>
      <div class="options">
        <label class="option-label"><div class="radio"></div><input type="radio" name="q12" value="A"><div class="option-text">Opción A</div></label>
        <label class="option-label"><div class="radio"></div><input type="radio" name="q12" value="B"><div class="option-text">Opción B</div></label>
        <label class="option-label"><div class="radio"></div><input type="radio" name="q12" value="C"><div class="option-text">Opción C</div></label>
      </div>
    </div>

    <!-- PROGRESO -->
    <div class="progress-wrap" aria-live="polite">
      <div class="progress-left">
        <div class="progress-stats" id="progress-text">Respondido: 0/0 — Falta: 0</div>
        <div class="bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
          <div class="bar-fill" id="bar-fill" style="width:0%"></div>
        </div>
      </div>
      <div class="progress-percent" id="progress-percent">0%</div>
    </div>

  </div>

<script>
(function(){
  const QUESTION_SELECTOR = '.question';
  const RADIO_SELECTOR = 'input[type="radio"]';
  const progressText = document.getElementById('progress-text');
  const barFill = document.getElementById('bar-fill');
  const progressPercent = document.getElementById('progress-percent');
  const totalQsEl = document.getElementById('total-qs');

  function init(){
    const qs = Array.from(document.querySelectorAll(QUESTION_SELECTOR));
    totalQsEl.innerText = qs.length;
    qs.forEach(q => {
      // marcar click en label -> marcar clase selected
      q.querySelectorAll('label.option-label').forEach(lbl => {
        const radio = lbl.querySelector('input[type="radio"]');
        lbl.addEventListener('click', (ev)=>{
          // si el radio ya estaba seleccionado, allow change (no bloqueo)
          // actualizar estados visuales
          q.querySelectorAll('label.option-label').forEach(l=> l.classList.remove('selected'));
          lbl.classList.add('selected');
          // marcar el input manualmente (por si el click vino en el container)
          if (radio) radio.checked = true;
          evaluateQuestion(q);
          updateProgress();
        });
      });

      // also allow keyboard change (listen to inputs)
      q.querySelectorAll(RADIO_SELECTOR).forEach(r => {
        r.addEventListener('change', ()=> {
          q.querySelectorAll('label.option-label').forEach(l=> l.classList.remove('selected'));
          const sel = r.closest('label.option-label'); if (sel) sel.classList.add('selected');
          evaluateQuestion(q);
          updateProgress();
        });
      });
    });

    // init progress
    updateProgress();
  }

  function evaluateQuestion(questionEl){
    const correct = (questionEl.getAttribute('data-correct')||'').toString().trim().toUpperCase();
    // limpiar
    questionEl.querySelectorAll('.option-label').forEach(l=> l.classList.remove('correct','incorrect'));
    if (!correct) return;
    const checked = questionEl.querySelector(RADIO_SELECTOR + ':checked');
    // marcar la correcta aunque no se haya seleccionado
    const correctInput = questionEl.querySelector(RADIO_SELECTOR + `[value="${correct}"]`);
    if (correctInput){
      const corrLabel = correctInput.closest('label.option-label');
      if (corrLabel) corrLabel.classList.add('correct');
    }
    if (!checked) return;
    const selectedVal = (checked.value||'').toString().trim().toUpperCase();
    if (selectedVal !== correct) {
      const selLabel = checked.closest('label.option-label');
      if (selLabel) selLabel.classList.add('incorrect');
    } else {
      // if selected correct, ensure it's visually correct
      const selLabel = checked.closest('label.option-label');
      if (selLabel) selLabel.classList.add('correct');
    }
  }

  function updateProgress(){
    const qs = Array.from(document.querySelectorAll(QUESTION_SELECTOR));
    const total = qs.length;
    let answered = 0;
    qs.forEach(q => {
      if (q.querySelector(RADIO_SELECTOR + ':checked')) answered++;
    });
    const pct = total === 0 ? 0 : Math.round((answered/total)*100);
    const remaining = total - answered;
    progressText.innerText = `Respondido: ${answered}/${total} — Falta: ${remaining}`;
    barFill.style.width = pct + '%';
    progressPercent.innerText = pct + '%';
    // update accessible attr
    const bar = barFill.parentElement;
    if (bar) bar.setAttribute('aria-valuenow', pct);
  }

  // inicializa al cargar
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else init();

  // si necesitas que las preguntas se evalúen cuando alguien use botones "Siguiente" externos,
  // mantuve un listener que re-evalúa tras clicks en el documento (suavemente).
  document.addEventListener('click', (e)=>{
    const txt = (e.target.innerText || '').toLowerCase();
    if (txt.includes('siguiente') || txt.includes('anterior') || txt.includes('next') || txt.includes('prev')) {
      setTimeout(()=>{ document.querySelectorAll(QUESTION_SELECTOR).forEach(q=> evaluateQuestion(q)); updateProgress(); }, 220);
    }
  });

})();
</script>
</body>
</html>
